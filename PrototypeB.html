<!DOCTYPE html>
<html lang="en">

<head>
    <title>UBC Degree Planner</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link rel="stylesheet" href="PrototypeB.css">
</head>

<body>

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-red w3-collapse w3-top w3-large w3-padding"
        style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
        <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft"
            style="width:100%;font-size:22px">Close Menu</a>
        <div class="w3-container">
            <h3 class="w3-padding-64"><b>UBC Engineering<br>Degree Planner</b>
                <img src="./assets/ubc_eng.png" style="max-height: 150px; margin: auto;">
            </h3>
        </div>
        <div class="w3-bar-block">
            <a href="#showcase" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Degree Planner</a>
            <a href="#services" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Students Like Me</a>
            <a href="#designers" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Help</a>
        </div>
    </nav>

    <!-- Top menu on small screens -->
    <header class="w3-container w3-top w3-hide-large w3-red w3-xlarge w3-padding">
        <a href="javascript:void(0)" class="w3-button w3-red w3-margin-right" onclick="w3_open()">â˜°</a>
        <span>Company Name</span>
    </header>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu"
        id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:340px;margin-right:40px">

        <!-- Header -->
        <div class="w3-container" style="margin-top:80px" id="showcase">
            <h1 class="w3-xxxlarge w3-text-red"><b>Degree Planner</b></h1>
            <hr style="width:50px;border:5px solid red" class="w3-round">
            <table id="">
                <tr>
                    <th>Course Type</th>
                    <th>Credits Completed</th>
                    <th>Credits Missing</th>
                </tr>
                <tr>
                    <td>First Year</td>
                    <td onclick="onClickDud();">25</td>
                    <td onclick="onClickDud();">-</td>
                </tr>
                <tr>
                    <td>Second Year</td>
                    <td onclick="onClickDud();">13</td>
                    <td onclick="onClickDud();">10</td>
                </tr>
                <tr>
                    <td>Third Year</td>
                    <td onclick="onClickDud();">23</td>
                    <td onclick="onClickDud();">3</td>
                </tr>
                <tr>
                    <td>Fourth Year</td>
                    <td onclick="onClickDud();">16</td>
                    <td onclick="onClickDud();">-</td>
                </tr>
                <tr>
                    <td>Electives</td>
                    <td onclick="onClickDud();">15</td>
                    <td onclick="onClickDud();">10</td>
                </tr>
            </table>
        </div>

        <!-- Services -->
        <div class="w3-container" id="services" style="margin-top:75px">
            <h1 class="w3-xxxlarge w3-text-red"><b>Students Like Me</b></h1>
            <hr style="width:50px;border:5px solid red" class="w3-round">
            <p>We found several students and graduates just like you! Click their profile to see their degree path.</p>
            <table>
                <tr></tr>
                <tr>
                    <td class="students">
                        <img src="./assets/female.jpg" onclick="onClickDud();">
                        <p>
                            <b>5-Year CPEN BASc Engineering Degree w/ Co-op</b><br>
                            Data Scientist @ Amazon
                        </p>
                    </td>
                    <td class="students">
                        <img src="./assets/male.jpg" onclick="onClickDud();">
                        <p>
                            <b>4-Year ELEC BASc Engineering Degree</b><br>
                            Software Developer @ Google
                        </p>
                    </td>
                    <td class="students">
                        <img src="./assets/female.jpg" onclick="onClickDud();">
                        <p>
                            <b>6-Year ELEC MASc Engineering Degree</b><br>
                            Process Engineer @ BC-Hydro
                        </p>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Designers -->
        <div class="w3-container" id="designers" style="margin-top:75px;">
            <h1 class="w3-xxxlarge w3-text-red"><b>Help</b></h1>
            <hr style="width:50px;border:5px solid red" class="w3-round">
            <p>Submit a contact form to your advisor or chat with our state of the art chatbot to answer any APSC degree
                planning needs.</p>
            <p>
            <form onsubmit="formSubmit();">
                <div class="w3-section">
                    <label>Advisor</label><br>
                    <select name="advisor" id="advisor">
                        <option value="CPEN">CPEN</option>
                        <option value="ELEC">ELEC</option>
                        <option value="MECH">MECH</option>
                        <option value="CHBE">CHBE</option>
                    </select>
                </div>
                <div class="w3-section">
                    <label>Name</label>
                    <input class="w3-input w3-border" type="text" name="Name" required>
                </div>
                <div class="w3-section">
                    <label>Email</label>
                    <input class="w3-input w3-border" type="text" name="Email" required>
                </div>
                <div class="w3-section">
                    <label>Message</label>
                    <input class="w3-input w3-border" type="text" name="Message" required>
                </div>
                <button type="submit" class="w3-button w3-block w3-padding-large w3-red w3-margin-bottom">Send
                    Message</button>
            </form>

            <div id="container" class="container">
                <img src="https://cdn.pixabay.com/photo/2020/01/02/16/38/chatbot-4736275_960_720.png" height="400vh"
                    alt="Chatbot clipart">
                <div id="chat" class="chat">
                    <div id="messages" class="messages"></div>
                    <input id="input" type="text" placeholder="Write something..." autocomplete="off"
                        autofocus="true" />
                </div>
            </div>
            </p>

        </div>

        <!-- End page content -->
    </div>

    <!-- W3.CSS Container -->
    <div class="w3-light-grey w3-container w3-padding-32" style="margin-top:75px;padding-right:58px">
        <p class="w3-right">Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS"
                target="_blank" class="w3-hover-opacity">w3.css</a></p>
    </div>

    <script>
        // Script to open and close sidebar
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
            document.getElementById("myOverlay").style.display = "block";
        }

        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
            document.getElementById("myOverlay").style.display = "none";
        }
        function formSubmit() {
            window.alert("Form submitted");
        }

        function onClickDud() {
            console.log("dud");
        }

        // Chatbot code

        const utterances = [
            ["how are you", "how is life", "how are things"],        //0
            ["hi", "hey", "hello", "good morning", "good afternoon"],      //1
            ["what are you doing", "what is going on", "what is up"],      //2
            ["how old are you"],					//3
            ["who are you", "are you human", "are you bot", "are you human or bot"]  //4
        ]
            ;

        // Possible responses corresponding to triggers

        const answers = [
            [
                "Fine... how are you?",
                "Pretty well, how are you?",
                "Fantastic, how are you?"
            ],                                                                                  	//0
            [
                "Hello!", "Hi!", "Hey!", "Hi there!", "Howdy"
            ],						//1
            [
                "Nothing much",
                "About to go to sleep",
                "Can you guess?",
                "I don't know actually"
            ],						//2
            ["I am infinite"],					//3
            ["I am just a bot", "I am a bot. What are you?"],	//4

        ];

        // For any other user input

        const alternatives = [
            "Go on...",
            "Try again",
        ];
        const inputField = document.getElementById("input");
        inputField.addEventListener("keydown", (e) => {
            if (e.code === "Enter") {
                let input = inputField.value;
                inputField.value = "";
                output(input);
            }
        });

        function output(input) {
            let product;
            let text = input.toLowerCase().replace(/[^\w\s\d]/gi, "");
            text = text
                .replace(/ a /g, " ")
                .replace(/whats/g, "what is")
                .replace(/please /g, "")
                .replace(/ please/g, "")
                .replace(/r u/g, "are you");

            if (compare(utterances, answers, text)) {
                // Search for exact match in triggers
                product = compare(utterances, answers, text);
            }
            else {
                product = alternatives[Math.floor(Math.random() * alternatives.length)];
            }

            addChatEntry(input, product);
        }

        function compare(utterancesArray, answersArray, string) {
            let reply;
            let replyFound = false;
            for (let x = 0; x < utterancesArray.length; x++) {
                for (let y = 0; y < utterancesArray[x].length; y++) {
                    if (utterancesArray[x][y] === string) {
                        let replies = answersArray[x];
                        reply = replies[Math.floor(Math.random() * replies.length)];
                        replyFound = true;
                        break;
                    }
                }
                if (replyFound) {
                    break;
                }
            }
            return reply;
        }

        function addChatEntry(input, product) {
            const messagesContainer = document.getElementById("messages");
            let userDiv = document.createElement("div");
            userDiv.id = "user";
            userDiv.className = "user response";
            userDiv.innerHTML = `<span>${input}</span>`;
            messagesContainer.appendChild(userDiv);

            let botDiv = document.createElement("div");
            let botText = document.createElement("span");
            botDiv.id = "bot";
            botDiv.className = "bot response";
            botText.innerText = "Typing...";
            botDiv.appendChild(botText);
            messagesContainer.appendChild(botDiv);

            messagesContainer.scrollTop =
                messagesContainer.scrollHeight - messagesContainer.clientHeight;

            setTimeout(() => {
                botText.innerText = `${product}`;
            }, 2000);
        }

    </script>

</body>

</html>